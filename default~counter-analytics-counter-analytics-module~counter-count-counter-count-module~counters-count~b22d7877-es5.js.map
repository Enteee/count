{"version":3,"sources":["webpack:///src/app/components/components.module.ts","webpack:///src/app/components/plus-minus-counter/plus-minus-counter.component.html","webpack:///src/app/components/plus-minus-counter/plus-minus-counter.component.ts","webpack:///src/app/services/counter.service.ts"],"names":["ComponentsModule","imports","declarations","exports","entryComponents","providers","PlusMinusCounterComponent","router","counterService","appStateService","gestureCtrl","SWIPE_CLICK_WIDTH_RATIO","hideTitle","swipeClickLeft","swipeClickRight","appState","swipeCounting","swipeClickGesture","create","el","rootItem","nativeElement","direction","threshold","gestureName","onStart","ev","onMove","onMoveHandler","onEnd","enable","event","rootItemWidth","offsetWidth","rightButtonWidth","rightButton","leftButtonWidth","leftButton","style","pointerEvents","textCenter","requestAnimationFrame","removeProperty","newRightButtonWidth","deltaX","width","Math","max","newLeftButtonWidth","console","log","display","clickIndicator","setProperty","click","counter","locked","count","plusCount","minusCount","selector","templateUrl","styleUrls","read","CounterService","counterRepositoryService","countEventRepositoryService","positionService","vibration","newCounter","sortOrder","all","length","save","delete","Promise","getByCounter","map","i","delta","vibrate","VIBRATION_PATTERN_POSITIVE","VIBRATION_PATTERN_NEGATIVE","positiveWrapAroundActive","positiveWrapAround","negativeWrapAroundActive","negativeWrapAround","position","getPosition","setRecordPosition","id","Reset","setLocked","from","to","counters","allSortBySortOrder","splice","randomDate","start","end","Date","getTime","random","round","Change","providedIn"],"mappings":"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","file":"default~counter-analytics-counter-analytics-module~counter-count-counter-count-module~counters-count~b22d7877-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { NgApexchartsModule } from 'ng-apexcharts';\n\nimport { NotImplementedModule } from '../not-implemented/not-implemented.module';\n\nimport { PlusMinusTotalsPieChartComponent } from './plus-minus-totals-pie-chart/plus-minus-totals-pie-chart.component';\nimport { PlusMinusCounterComponent } from './plus-minus-counter/plus-minus-counter.component';\n\nimport { DayOfWeekHistogramComponent } from './day-of-week-histogram/day-of-week-histogram.component';\nimport { DayOfMonthHistogramComponent } from './day-of-month-histogram/day-of-month-histogram.component';\nimport { HourOfDayRadarComponent } from './hour-of-day-radar/hour-of-day-radar.component';\n\nimport { YearHeatmapComponent } from './year-heatmap/year-heatmap.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    IonicModule,\n    NgApexchartsModule,\n    NotImplementedModule,\n  ],\n  declarations: [\n    PlusMinusTotalsPieChartComponent,\n    PlusMinusCounterComponent,\n    DayOfWeekHistogramComponent,\n    DayOfMonthHistogramComponent,\n    HourOfDayRadarComponent,\n    YearHeatmapComponent,\n  ],\n  exports: [\n    PlusMinusCounterComponent,\n  ],\n  entryComponents: [\n    PlusMinusTotalsPieChartComponent,\n    DayOfWeekHistogramComponent,\n    DayOfMonthHistogramComponent,\n    HourOfDayRadarComponent,\n    YearHeatmapComponent,\n  ],\n  providers: [\n  ]\n})\nexport class ComponentsModule { }\n","<ion-item #rootItem\n  [style.--min-height.vh]=\"minHeight\"\n  class=\"ion-no-padding\"\n>\n  <ng-template [ngIf]=\"counter.minusCount < 0\">\n    <ion-button\n      #buttonLeft\n\n      class=\"ion-no-padding\"\n\n      size=\"large\"\n      color=\"danger\"\n      expand=\"full\"\n\n      [disabled]=\"counter.locked\"\n      (click)=\"countMinus()\"\n    >\n      <div [ngSwitch]=\"counter.minusCount\">\n        <div *ngSwitchCase=\"-1\">\n          <ion-icon name=\"remove\"></ion-icon>\n        </div>\n\n        <div *ngSwitchDefault>\n          {{counter.minusCount}}\n        </div>\n\n      </div>\n    </ion-button>\n  </ng-template>\n\n\n  <ion-label\n    class=\"ion-text-center\"\n    #textCenter\n\n    clickable\n    [routerLink]=\"['/counter-detail', counter.id]\"\n  >\n    <h1 *ngIf=\"!hideTitle\">{{counter.title}}</h1>\n    <h1>{{counter.count}}</h1>\n  </ion-label>\n\n  <ion-icon #clickIndicator name=\"chevron-forward-outline\"></ion-icon>\n\n  <ng-template [ngIf]=\"counter.plusCount > 0\">\n    <ion-button\n      #buttonRight\n\n      class=\"ion-no-padding\"\n\n      size=\"large\"\n      color=\"success\"\n      expand=\"full\"\n\n      [disabled]=\"counter.locked\"\n      (click)=\"countPlus()\"\n    >\n      <div [ngSwitch]=\"counter.plusCount\">\n        <div *ngSwitchCase=\"1\">\n          <ion-icon name=\"add\"></ion-icon>\n        </div>\n\n        <div *ngSwitchDefault>\n          +{{counter.plusCount}}\n        </div>\n\n      </div>\n    </ion-button>\n  </ng-template>\n\n  <ion-reorder slot=\"end\"></ion-reorder>\n\n</ion-item>\n","import { Component, OnInit, AfterViewInit, Input, ViewChild, ElementRef } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { GestureController } from '@ionic/angular';\n\nimport { Counter } from '../../models/counter';\nimport { CounterService } from '../../services/counter.service';\n\nimport { AppState } from '../../models/app-state';\nimport { AppStateService } from '../../services/app-state.service';\n\n@Component({\n  selector: 'app-plus-minus-counter',\n  templateUrl: './plus-minus-counter.component.html',\n  styleUrls: ['./plus-minus-counter.component.scss'],\n})\nexport class PlusMinusCounterComponent implements OnInit, AfterViewInit {\n\n  readonly SWIPE_CLICK_WIDTH_RATIO = 0.3;\n\n  @ViewChild('rootItem', {read: ElementRef}) rootItem: ElementRef;\n  rootItemWidth: number;\n\n  @ViewChild('textCenter', {read: ElementRef}) textCenter: ElementRef;\n  @ViewChild('clickIndicator', {read: ElementRef}) clickIndicator: ElementRef;\n  @ViewChild('buttonRight', {read: ElementRef}) rightButton: ElementRef;\n  rightButtonWidth: number;\n\n  @ViewChild('buttonLeft', {read: ElementRef}) leftButton: ElementRef;\n  leftButtonWidth: number;\n\n  @Input() counter: Counter;\n  @Input() minHeight: number;\n  @Input() hideTitle = false;\n\n  swipeClickGesture;\n  swipeClickLeft = false;\n  swipeClickRight = false;\n\n  constructor(\n    private router: Router,\n    private counterService: CounterService,\n    private appStateService: AppStateService,\n    private gestureCtrl: GestureController,\n  ) {}\n\n  ngOnInit() {}\n\n  ngAfterViewInit() {\n    if(this.appStateService.appState.swipeCounting){\n      this.swipeClickGesture = this.gestureCtrl.create({\n        el: this.rootItem.nativeElement,\n        direction: 'x',\n        threshold: 15,\n        gestureName: 'swipe',\n        onStart: ev => this.onStart(ev),\n        onMove: ev => this.onMoveHandler(ev),\n        onEnd: ev => this.onEnd(ev),\n      });\n      this.swipeClickGesture.enable();\n    }\n  }\n\n  onStart(event: any) {\n    this.rootItemWidth = this.rootItem.nativeElement.offsetWidth;\n    this.rightButtonWidth = (this.rightButton) ? this.rightButton.nativeElement.offsetWidth : 0;\n    this.leftButtonWidth = (this.leftButton) ? this.leftButton.nativeElement.offsetWidth : 0;\n    this.swipeClickRight = false;\n    this.swipeClickLeft = false;\n\n    // disable click events\n    if(this.rightButton){\n      this.rightButton.nativeElement.style.pointerEvents = 'none';\n    }\n    if(this.leftButton){\n      this.leftButton.nativeElement.style.pointerEvents = 'none';\n    }\n    this.textCenter.nativeElement.style.pointerEvents = 'none';\n\n    requestAnimationFrame(() => {\n      if (this.rightButton) {\n        this.rightButton.nativeElement.style.removeProperty('transition');\n      }\n      if (this.leftButton) {\n        this.leftButton.nativeElement.style.removeProperty('transition');\n      }\n    });\n  }\n\n  onMoveHandler(event: any) {\n\n    const newRightButtonWidth = this.rightButtonWidth - event.deltaX;\n    if(this.rightButton){\n      this.rightButton.nativeElement.style.width = Math.max(\n        (this.leftButton) ? 0 : this.rightButtonWidth,\n        newRightButtonWidth,\n      ) + 'px';\n    }\n\n    const newLeftButtonWidth = this.leftButtonWidth + event.deltaX;\n    if(this.leftButton){\n      this.leftButton.nativeElement.style.width = Math.max(\n        (this.rightButton) ? 0 : this.leftButtonWidth,\n        newLeftButtonWidth,\n      ) + 'px';\n    }\n\n    if (this.rootItemWidth * this.SWIPE_CLICK_WIDTH_RATIO < newRightButtonWidth) {\n      console.log('rightClick');\n      if(this.rightButton){\n        this.rightButton.nativeElement.style.width = '100%';\n\n        if(this.leftButton){\n          this.leftButton.nativeElement.style.display = 'none';\n        }\n\n        this.clickIndicator.nativeElement.style.display = 'none';\n        this.swipeClickRight = true;\n      }\n    } else if (this.rootItemWidth * this.SWIPE_CLICK_WIDTH_RATIO  < newLeftButtonWidth) {\n      console.log('leftClick');\n      if(this.leftButton){\n        this.leftButton.nativeElement.style.width = '100%';\n\n        if(this.rightButton){\n          this.rightButton.nativeElement.style.display = 'none';\n        }\n\n        this.clickIndicator.nativeElement.style.display = 'none';\n        this.swipeClickLeft = true;\n      }\n    } else {\n      if(this.rightButton){\n        this.rightButton.nativeElement.style.display = 'block';\n      }\n      if(this.leftButton){\n        this.leftButton.nativeElement.style.display = 'block';\n      }\n      this.clickIndicator.nativeElement.style.display = 'block';\n\n      this.swipeClickRight = false;\n      this.swipeClickLeft = false;\n    }\n  }\n\n  onEnd(event: any) {\n\n    // enable click events again\n    if(this.rightButton){\n      this.rightButton.nativeElement.style.pointerEvents = 'auto';\n    }\n    if(this.leftButton){\n      this.leftButton.nativeElement.style.pointerEvents = 'auto';\n    }\n    this.textCenter.nativeElement.style.pointerEvents = 'auto';\n\n    requestAnimationFrame(() => {\n      if(this.rightButton){\n        this.rightButton.nativeElement.style.setProperty('transition', '0.2s all ease');\n        this.rightButton.nativeElement.style.display = 'block';\n        this.rightButton.nativeElement.style.width = this.rightButtonWidth + 'px';\n      }\n      if(this.leftButton){\n        this.leftButton.nativeElement.style.setProperty('transition', '0.2s all ease');\n        this.leftButton.nativeElement.style.display = 'block';\n        this.leftButton.nativeElement.style.width = this.leftButtonWidth + 'px';\n      }\n\n      this.clickIndicator.nativeElement.style.display = 'block';\n    });\n\n\n    if(this.swipeClickRight){\n      if(this.rightButton){\n        this.rightButton.nativeElement.click()\n      }\n    }\n\n    if(this.swipeClickLeft){\n      if(this.leftButton){\n        this.leftButton.nativeElement.click()\n      }\n    }\n  }\n\n  async countPlus() {\n    if (!this.counter.locked){\n      await this.counterService.count(\n        this.counter,\n        this.counter.plusCount,\n      );\n    }\n  }\n\n  async countMinus() {\n    if (!this.counter.locked){\n      await this.counterService.count(\n        this.counter,\n        this.counter.minusCount,\n      );\n    }\n  }\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { Vibration } from '@ionic-native/vibration/ngx';\n\nimport { Counter } from '../models/counter';\nimport { CounterRepositoryService } from '../models/counter-repository.service';\n\nimport { CountEvent, CountEventType } from '../models/count-event';\nimport { CountEventRepositoryService } from '../models/count-event-repository.service';\n\nimport { Position } from '../models/count-event';\nimport { PositionService } from './position.service';\n\nimport { AppStateService } from './app-state.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CounterService {\n\n  static readonly VIBRATION_PATTERN_POSITIVE = [30];\n  static readonly VIBRATION_PATTERN_NEGATIVE = [30, 30, 30];\n\n  constructor(\n    private counterRepositoryService: CounterRepositoryService,\n    private countEventRepositoryService: CountEventRepositoryService,\n    private positionService: PositionService,\n    private appStateService: AppStateService,\n    private vibration: Vibration,\n  ) {}\n\n  get allSortBySortOrder(): Array<Counter> {\n    return this.counterRepositoryService.allSortBySortOrder;\n  }\n\n  async addCounter() {\n    const newCounter = new Counter();\n    // add counter to bottom\n    newCounter.sortOrder = this.counterRepositoryService.all.length + 1;\n    await this.counterRepositoryService.save(newCounter);\n    return newCounter;\n  }\n\n  async delete(counter: Counter) {\n    // first delete the counter: this is so that the ui element disappers\n    // quicker which should be create better user experience.\n    await this.counterRepositoryService.delete(counter);\n\n    // then, delete all events of this counter\n    await Promise.all(\n      this.countEventRepositoryService.getByCounter(counter).map(\n        (i) => this.countEventRepositoryService.delete(i)\n      )\n    );\n  }\n\n  async count(\n    counter: Counter,\n    delta: number,\n  ) {\n    counter.count += delta;\n\n    // vibrate\n    if (\n      this.appStateService.appState.vibrate\n      && counter.vibrate\n    ) {\n      this.vibration.vibrate(\n        (delta > 0) ?\n          CounterService.VIBRATION_PATTERN_POSITIVE :\n          CounterService.VIBRATION_PATTERN_NEGATIVE\n      );\n    }\n\n    // apply positive and negative wraparounds\n    if (\n      counter.positiveWrapAroundActive\n      && counter.count > counter.positiveWrapAround\n    ) {\n      counter.count = counter.count % counter.positiveWrapAround;\n    }\n\n    if (\n      counter.negativeWrapAroundActive\n      && counter.count < counter.negativeWrapAround\n    ) {\n      counter.count = counter.count % counter.negativeWrapAround;\n    }\n\n    let position = null;\n    try {\n      position = await this.positionService.getPosition();\n    } catch (e) {\n      // user does not allow posiiton recording or something unexpected happened\n      await this.appStateService.setRecordPosition(false);\n    }\n\n    await Promise.all([\n      this.counterRepositoryService.save(counter),\n      this.countEventRepositoryService.save(\n        new CountEvent(\n          counter.id,\n          delta,\n          position,\n        )\n      )\n    ]);\n  }\n\n  async reset(\n    counter: Counter,\n  ) {\n    counter.count = 0;\n    await Promise.all([\n      this.counterRepositoryService.save(\n        counter\n      ),\n      this.countEventRepositoryService.save(\n        new CountEvent(\n          counter.id,\n          0,\n          {} as any,\n          CountEventType.Reset,\n        )\n      ),\n    ]);\n  }\n\n  async setLocked(\n    counter: Counter,\n    setLocked: boolean,\n  ) {\n    counter.locked = setLocked;\n    await this.counterRepositoryService.save(\n      counter\n    );\n  }\n\n  async reorder(\n    from: number,\n    to: number,\n  ) {\n    const counters = this.counterRepositoryService.allSortBySortOrder;\n    // move element in array\n    counters.splice(to, 0,\n      counters.splice(from, 1)[0]\n    );\n    // save in new order\n    await Promise.all(\n      counters.map(\n        async (counter, i) => {\n          counter.sortOrder = i;\n          await this.counterRepositoryService.save(counter);\n        }\n      )\n    );\n  }\n\n  /**\n   * For development purposes only\n   */\n  async addRandomCountEvent(\n    counter: Counter,\n  ) {\n    const delta = Math.round(Math.random() * 10 % 10 - 5);\n    counter.count += delta;\n\n    function randomDate(start, end) {\n      return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));\n    }\n\n\n    await Promise.all([\n      this.counterRepositoryService.save(counter),\n      this.countEventRepositoryService.save(\n        new CountEvent(\n          counter.id,\n          delta,\n          null,\n          CountEventType.Change,\n          randomDate(new Date(2012, 0, 1), new Date()),\n        )\n      )\n    ]);\n  }\n\n}\n"]}