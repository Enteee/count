{"version":3,"sources":["webpack:///src/app/components/components.module.ts","webpack:///src/app/components/plus-minus-counter/plus-minus-counter.component.html","webpack:///src/app/components/plus-minus-counter/plus-minus-counter.component.ts","webpack:///src/app/services/counter.service.ts"],"names":["ComponentsModule","imports","declarations","exports","entryComponents","providers","PlusMinusCounterComponent","router","counterService","appStateService","gestureCtrl","SWIPE_CLICK_WIDTH_RATIO","hideTitle","showDetailsOnClick","swipeClickGestureFirstRun","swipeClickLeft","swipeClickRight","appState","swipeCounting","swipeClickGesture","create","el","rootItem","nativeElement","direction","threshold","gestureName","onStart","ev","onMove","onMoveHandler","onEnd","enable","rootItemWidth","offsetWidth","rightButtonWidth","rightButton","leftButtonWidth","leftButton","event","recordWidths","style","pointerEvents","textCenter","requestAnimationFrame","removeProperty","newRightButtonWidth","Math","min","deltaX","width","max","newLeftButtonWidth","display","clickIndicator","setProperty","click","counter","locked","count","plusCount","minusCount","navigate","id","showDetails","selector","templateUrl","styleUrls","read","CounterService","counterRepositoryService","countEventRepositoryService","positionService","vibration","newCounter","sortOrder","all","length","save","Promise","getByCounter","map","i","delta","vibrate","VIBRATION_PATTERN_POSITIVE","VIBRATION_PATTERN_NEGATIVE","positiveLimitActive","positiveLimit","negativeLimitActive","negativeLimit","position","getPosition","setRecordPosition","Reset","setLocked","from","to","counters","allSortBySortOrder","splice","randomDate","start","end","Date","getTime","random","round","Change","providedIn"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QA8CaA,gB;;;;;YAAAA;;;;yBAAAA,gB;AAAgB,O;AAAA,iBAHhB,E;AACV,gBA1BQ,CACP,4DADO,EAEP,4DAFO,EAGP,0DAHO,EAIP,gEAJO,EAKP,4FALO,CA0BR;;;;0HAEUA,gB,EAAgB;AAAA,uBApBzB,mIAoByB,EAnBzB,0GAmByB,EAlBzB,kHAkByB,EAjBzB,qHAiByB,EAhBzB,uGAgByB,EAfzB,0FAeyB;AAfL,kBAZpB,4DAYoB,EAXpB,4DAWoB,EAVpB,0DAUoB,EATpB,gEASoB,EARpB,4FAQoB,CAeK;AAvBL,kBAWpB,0GAXoB;AAuBK,O;AAZA,K;;;;;sEAYhBA,gB,EAAgB;cA7B5B,sDA6B4B;eA7BnB;AACRC,iBAAO,EAAE,CACP,4DADO,EAEP,4DAFO,EAGP,0DAHO,EAIP,gEAJO,EAKP,4FALO,CADD;AAQRC,sBAAY,EAAE,CACZ,mIADY,EAEZ,0GAFY,EAGZ,kHAHY,EAIZ,qHAJY,EAKZ,uGALY,EAMZ,0FANY,CARN;AAgBRC,iBAAO,EAAE,CACP,0GADO,CAhBD;AAmBRC,yBAAe,EAAE,CACf,mIADe,EAEf,kHAFe,EAGf,qHAHe,EAIf,uGAJe,EAKf,0FALe,CAnBT;AA0BRC,mBAAS,EAAE;AA1BH,S;AA6BmB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BrB;;AACE;;AACF;;;;;;AAEA;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;;;AAlBN;;AAUE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AACE;;AAIA;;AAIF;;AACF;;;;;;AAbE;;AAGK;;AAAA;;AACE;;AAAA;;;;;;AAoBT;;AAAuB;;AAAiB;;;;;;AAAjB;;AAAA;;;;;;AAKrB;;;;;;AAoBE;;AACE;;AACF;;;;;;AAEA;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;;;AAlBN;;AAUE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AACE;;AAIA;;AAIF;;AACF;;;;;;AAbE;;AAGK;;AAAA;;AACE;;AAAA;;;;QChDAC,yB;AAyBX,yCACUC,MADV,EAEUC,cAFV,EAGUC,eAHV,EAIUC,WAJV,EAIwC;AAAA;;AAH9B,aAAAH,MAAA,GAAAA,MAAA;AACA,aAAAC,cAAA,GAAAA,cAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,WAAA,GAAAA,WAAA;AA3BD,aAAAC,uBAAA,GAA0B,GAA1B;AAeA,aAAAC,SAAA,GAAY,KAAZ;AACA,aAAAC,kBAAA,GAAqB,IAArB;AAGT,aAAAC,yBAAA,GAA4B,IAA5B;AACA,aAAAC,cAAA,GAAiB,KAAjB;AACA,aAAAC,eAAA,GAAkB,KAAlB;AAOI;;;;mCAEO,CAAE;;;0CAEK;AAAA;;AAChB,cAAG,KAAKP,eAAL,CAAqBQ,QAArB,CAA8BC,aAAjC,EAA+C;AAC7C,iBAAKC,iBAAL,GAAyB,KAAKT,WAAL,CAAiBU,MAAjB,CAAwB;AAC/CC,gBAAE,EAAE,KAAKC,QAAL,CAAcC,aAD6B;AAE/CC,uBAAS,EAAE,GAFoC;AAG/CC,uBAAS,EAAE,EAHoC;AAI/CC,yBAAW,EAAE,OAJkC;AAK/CC,qBAAO,EAAE,iBAAAC,EAAE;AAAA,uBAAI,KAAI,CAACD,OAAL,CAAaC,EAAb,CAAJ;AAAA,eALoC;AAM/CC,oBAAM,EAAE,gBAAAD,EAAE;AAAA,uBAAI,KAAI,CAACE,aAAL,CAAmBF,EAAnB,CAAJ;AAAA,eANqC;AAO/CG,mBAAK,EAAE,eAAAH,EAAE;AAAA,uBAAI,KAAI,CAACG,KAAL,CAAWH,EAAX,CAAJ;AAAA;AAPsC,aAAxB,CAAzB;AASA,iBAAKT,iBAAL,CAAuBa,MAAvB;AACD;AACF;;;uCAEW;AACV,eAAKC,aAAL,GAAqB,KAAKX,QAAL,CAAcC,aAAd,CAA4BW,WAAjD;AACA,eAAKC,gBAAL,GAAyB,KAAKC,WAAN,GAAqB,KAAKA,WAAL,CAAiBb,aAAjB,CAA+BW,WAApD,GAAkE,CAA1F;AACA,eAAKG,eAAL,GAAwB,KAAKC,UAAN,GAAoB,KAAKA,UAAL,CAAgBf,aAAhB,CAA8BW,WAAlD,GAAgE,CAAvF;AACD;;;gCAEOK,K,EAAY;AAAA;;AAElB;AACA,cAAG,KAAKzB,yBAAR,EAAkC;AAChC,iBAAK0B,YAAL;AACA,iBAAK1B,yBAAL,GAAiC,KAAjC;AACD;;AAED,eAAKE,eAAL,GAAuB,KAAvB;AACA,eAAKD,cAAL,GAAsB,KAAtB,CATkB,CAWlB;;AACA,cAAG,KAAKqB,WAAR,EAAoB;AAClB,iBAAKA,WAAL,CAAiBb,aAAjB,CAA+BkB,KAA/B,CAAqCC,aAArC,GAAqD,MAArD;AACD;;AACD,cAAG,KAAKJ,UAAR,EAAmB;AACjB,iBAAKA,UAAL,CAAgBf,aAAhB,CAA8BkB,KAA9B,CAAoCC,aAApC,GAAoD,MAApD;AACD;;AACD,eAAKC,UAAL,CAAgBpB,aAAhB,CAA8BkB,KAA9B,CAAoCC,aAApC,GAAoD,MAApD;AAEAE,+BAAqB,CAAC,YAAM;AAC1B,gBAAI,MAAI,CAACR,WAAT,EAAsB;AACpB,oBAAI,CAACA,WAAL,CAAiBb,aAAjB,CAA+BkB,KAA/B,CAAqCI,cAArC,CAAoD,YAApD;AACD;;AACD,gBAAI,MAAI,CAACP,UAAT,EAAqB;AACnB,oBAAI,CAACA,UAAL,CAAgBf,aAAhB,CAA8BkB,KAA9B,CAAoCI,cAApC,CAAmD,YAAnD;AACD;AACF,WAPoB,CAArB;AAQD;;;sCAEaN,K,EAAY;AAExB,cAAMO,mBAAmB,GAAGC,IAAI,CAACC,GAAL,CAC1B,KAAKb,gBAAL,GAAwBI,KAAK,CAACU,MADJ,EAE1B,KAAKhB,aAFqB,CAA5B;;AAIA,cAAG,KAAKG,WAAR,EAAoB;AAClB,iBAAKA,WAAL,CAAiBb,aAAjB,CAA+BkB,KAA/B,CAAqCS,KAArC,GAA6CH,IAAI,CAACI,GAAL,CAC1C,KAAKb,UAAN,GAAoB,CAApB,GAAwB,KAAKH,gBADc,EAE3CW,mBAF2C,IAGzC,IAHJ;AAID;;AAED,cAAMM,kBAAkB,GAAGL,IAAI,CAACC,GAAL,CACzB,KAAKX,eAAL,GAAuBE,KAAK,CAACU,MADJ,EAEzB,KAAKhB,aAFoB,CAA3B;;AAIA,cAAG,KAAKK,UAAR,EAAmB;AACjB,iBAAKA,UAAL,CAAgBf,aAAhB,CAA8BkB,KAA9B,CAAoCS,KAApC,GAA4CH,IAAI,CAACI,GAAL,CACzC,KAAKf,WAAN,GAAqB,CAArB,GAAyB,KAAKC,eADY,EAE1Ce,kBAF0C,IAGxC,IAHJ;AAID;;AAED,cAAI,KAAKnB,aAAL,GAAqB,KAAKtB,uBAA1B,GAAoDmC,mBAAxD,EAA6E;AAC3E,gBAAG,KAAKV,WAAR,EAAoB;AAClB,mBAAKA,WAAL,CAAiBb,aAAjB,CAA+BkB,KAA/B,CAAqCS,KAArC,GAA6C,MAA7C;;AAEA,kBAAG,KAAKZ,UAAR,EAAmB;AACjB,qBAAKA,UAAL,CAAgBf,aAAhB,CAA8BkB,KAA9B,CAAoCY,OAApC,GAA8C,MAA9C;AACD;;AAED,kBAAG,KAAKC,cAAR,EAAuB;AACrB,qBAAKA,cAAL,CAAoB/B,aAApB,CAAkCkB,KAAlC,CAAwCY,OAAxC,GAAkD,MAAlD;AACD;;AACD,mBAAKrC,eAAL,GAAuB,IAAvB;AACD;AACF,WAbD,MAaO,IAAI,KAAKiB,aAAL,GAAqB,KAAKtB,uBAA1B,GAAqDyC,kBAAzD,EAA6E;AAClF,gBAAG,KAAKd,UAAR,EAAmB;AACjB,mBAAKA,UAAL,CAAgBf,aAAhB,CAA8BkB,KAA9B,CAAoCS,KAApC,GAA4C,MAA5C;;AAEA,kBAAG,KAAKd,WAAR,EAAoB;AAClB,qBAAKA,WAAL,CAAiBb,aAAjB,CAA+BkB,KAA/B,CAAqCY,OAArC,GAA+C,MAA/C;AACD;;AAED,kBAAG,KAAKC,cAAR,EAAuB;AACrB,qBAAKA,cAAL,CAAoB/B,aAApB,CAAkCkB,KAAlC,CAAwCY,OAAxC,GAAkD,MAAlD;AACD;;AACD,mBAAKtC,cAAL,GAAsB,IAAtB;AACD;AACF,WAbM,MAaA;AACL,gBAAG,KAAKqB,WAAR,EAAoB;AAClB,mBAAKA,WAAL,CAAiBb,aAAjB,CAA+BkB,KAA/B,CAAqCY,OAArC,GAA+C,OAA/C;AACD;;AACD,gBAAG,KAAKf,UAAR,EAAmB;AACjB,mBAAKA,UAAL,CAAgBf,aAAhB,CAA8BkB,KAA9B,CAAoCY,OAApC,GAA8C,OAA9C;AACD;;AACD,gBAAG,KAAKC,cAAR,EAAuB;AACrB,mBAAKA,cAAL,CAAoB/B,aAApB,CAAkCkB,KAAlC,CAAwCY,OAAxC,GAAkD,OAAlD;AACD;;AAED,iBAAKrC,eAAL,GAAuB,KAAvB;AACA,iBAAKD,cAAL,GAAsB,KAAtB;AACD;AACF;;;8BAEKwB,K,EAAY;AAAA;;AAEhB;AACA,cAAG,KAAKH,WAAR,EAAoB;AAClB,iBAAKA,WAAL,CAAiBb,aAAjB,CAA+BkB,KAA/B,CAAqCC,aAArC,GAAqD,MAArD;AACD;;AACD,cAAG,KAAKJ,UAAR,EAAmB;AACjB,iBAAKA,UAAL,CAAgBf,aAAhB,CAA8BkB,KAA9B,CAAoCC,aAApC,GAAoD,MAApD;AACD;;AACD,eAAKC,UAAL,CAAgBpB,aAAhB,CAA8BkB,KAA9B,CAAoCC,aAApC,GAAoD,MAApD;AAEAE,+BAAqB,CAAC,YAAM;AAC1B,gBAAG,MAAI,CAACR,WAAR,EAAoB;AAClB,oBAAI,CAACA,WAAL,CAAiBb,aAAjB,CAA+BkB,KAA/B,CAAqCc,WAArC,CAAiD,YAAjD,EAA+D,eAA/D;;AACA,oBAAI,CAACnB,WAAL,CAAiBb,aAAjB,CAA+BkB,KAA/B,CAAqCY,OAArC,GAA+C,OAA/C;AACA,oBAAI,CAACjB,WAAL,CAAiBb,aAAjB,CAA+BkB,KAA/B,CAAqCS,KAArC,GAA6C,MAAI,CAACf,gBAAL,GAAwB,IAArE;AACD;;AACD,gBAAG,MAAI,CAACG,UAAR,EAAmB;AACjB,oBAAI,CAACA,UAAL,CAAgBf,aAAhB,CAA8BkB,KAA9B,CAAoCc,WAApC,CAAgD,YAAhD,EAA8D,eAA9D;;AACA,oBAAI,CAACjB,UAAL,CAAgBf,aAAhB,CAA8BkB,KAA9B,CAAoCY,OAApC,GAA8C,OAA9C;AACA,oBAAI,CAACf,UAAL,CAAgBf,aAAhB,CAA8BkB,KAA9B,CAAoCS,KAApC,GAA4C,MAAI,CAACb,eAAL,GAAuB,IAAnE;AACD;;AAED,gBAAG,MAAI,CAACiB,cAAR,EAAuB;AACrB,oBAAI,CAACA,cAAL,CAAoB/B,aAApB,CAAkCkB,KAAlC,CAAwCY,OAAxC,GAAkD,OAAlD;AACD;AACF,WAfoB,CAArB;;AAkBA,cAAG,KAAKrC,eAAR,EAAwB;AACtB,gBAAG,KAAKoB,WAAR,EAAoB;AAClB,mBAAKA,WAAL,CAAiBb,aAAjB,CAA+BiC,KAA/B;AACD;AACF;;AAED,cAAG,KAAKzC,cAAR,EAAuB;AACrB,gBAAG,KAAKuB,UAAR,EAAmB;AACjB,mBAAKA,UAAL,CAAgBf,aAAhB,CAA8BiC,KAA9B;AACD;AACF;AACF;;;oCAEiB;;;;;;wBACX,KAAKC,OAAL,CAAaC,M;;;;;;AAChB,2BAAM,KAAKlD,cAAL,CAAoBmD,KAApB,CACJ,KAAKF,OADD,EAEJ,KAAKA,OAAL,CAAaG,SAFT,CAAN;;;;;;;;;AAKH;;;qCAEkB;;;;;;wBACZ,KAAKH,OAAL,CAAaC,M;;;;;;AAChB,2BAAM,KAAKlD,cAAL,CAAoBmD,KAApB,CACJ,KAAKF,OADD,EAEJ,KAAKA,OAAL,CAAaI,UAFT,CAAN;;;;;;;;;AAKH;;;sCAEa;AACZ,cAAG,KAAKhD,kBAAR,EAA2B;AACzB,iBAAKN,MAAL,CAAYuD,QAAZ,CAAqB,CAAC,iBAAD,EAAoB,KAAKL,OAAL,CAAaM,EAAjC,CAArB;AACD;AACF;;;;;;;uBAvNUzD,yB,EAAyB,uH,EAAA,yI,EAAA,4I,EAAA,iI;AAAA,K;;;YAAzBA,yB;AAAyB,6C;AAAA;AAAA;+EAIN,wD;;+EAGE,wD;;+EACI,wD;;+EACH,wD;;+EAGD,wD;;;;;;;;;;;;;;;;;;;;;;;;AD5BlC;;AAGE;AAAA,mBAAiB,IAAAkC,YAAA,EAAjB;AAA+B,WAA/B,EAA+B,KAA/B,EAA+B,6DAA/B;;AAEA;;AA2BA;;AAKE;AAAA,mBAAS,IAAAwB,WAAA,EAAT;AAAsB,WAAtB;;AAEA;;AACA;;AAAI;;AAAiB;;AACvB;;AAEE;;AAOF;;AA0BA;;AAEF;;;;AA7EE;;AAIa;;AAAA;;AAkCP;;AAAA;;AACA;;AAAA;;AAGS;;AAAA;;AAOF;;AAAA;;;;;;;;;sEClCF1D,yB,EAAyB;cALrC,uDAKqC;eAL3B;AACT2D,kBAAQ,EAAE,wBADD;AAETC,qBAAW,EAAE,qCAFJ;AAGTC,mBAAS,EAAE,CAAC,qCAAD;AAHF,S;AAK2B,Q;;;;;;;;;;;;gBAInC,uD;iBAAU,U,EAAY;AAACC,gBAAI,EAAE;AAAP,W;;;gBAGtB,uD;iBAAU,Y,EAAc;AAACA,gBAAI,EAAE;AAAP,W;;;gBACxB,uD;iBAAU,gB,EAAkB;AAACA,gBAAI,EAAE;AAAP,W;;;gBAC5B,uD;iBAAU,a,EAAe;AAACA,gBAAI,EAAE;AAAP,W;;;gBAGzB,uD;iBAAU,Y,EAAc;AAACA,gBAAI,EAAE;AAAP,W;;;gBAGxB;;;gBACA;;;gBACA;;;gBACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCfUC,c;AAKX,8BACUC,wBADV,EAEUC,2BAFV,EAGUC,eAHV,EAIU/D,eAJV,EAKUgE,SALV,EAK8B;AAAA;;AAJpB,aAAAH,wBAAA,GAAAA,wBAAA;AACA,aAAAC,2BAAA,GAAAA,2BAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAA/D,eAAA,GAAAA,eAAA;AACA,aAAAgE,SAAA,GAAAA,SAAA;AACN;;;;qCAMe;;;;;;;AACXC,8B,GAAa,IAAI,uDAAJ,E,EACnB;;AACAA,8BAAU,CAACC,SAAX,GAAuB,KAAKL,wBAAL,CAA8BM,GAA9B,CAAkCC,MAAlC,GAA2C,CAAlE;;AACA,2BAAM,KAAKP,wBAAL,CAA8BQ,IAA9B,CAAmCJ,UAAnC,CAAN;;;sDACOA,U;;;;;;;;;AACR;;;gCAEYjB,O,EAAkB;;;;;;;;;AAG7B,2BAAM,KAAKa,wBAAL,WAAqCb,OAArC,CAAN;;;;AAGA,2BAAMsB,OAAO,CAACH,GAAR,CACJ,KAAKL,2BAAL,CAAiCS,YAAjC,CAA8CvB,OAA9C,EAAuDwB,GAAvD,CACE,UAACC,CAAD;AAAA,6BAAO,MAAI,CAACX,2BAAL,WAAwCW,CAAxC,CAAP;AAAA,qBADF,CADI,CAAN;;;;;;;;;AAKD;;;8BAGCzB,O,EACA0B,K,EAAa;;;;;;;AAEb1B,2BAAO,CAACE,KAAR,IAAiBwB,KAAjB,C,CAEA;;AACA,wBACE,KAAK1E,eAAL,CAAqBQ,QAArB,CAA8BmE,OAA9B,IACG3B,OAAO,CAAC2B,OAFb,EAGE;AACA,2BAAKX,SAAL,CAAeW,OAAf,CACGD,KAAK,GAAG,CAAT,GACEd,cAAc,CAACgB,0BADjB,GAEEhB,cAAc,CAACiB,0BAHnB;AAKD,qB,CAED;;;AACA,wBACE7B,OAAO,CAAC8B,mBAAR,IACG9B,OAAO,CAACE,KAAR,GAAgBF,OAAO,CAAC+B,aAF7B,EAGE;AACA/B,6BAAO,CAACE,KAAR,GAAgBF,OAAO,CAACE,KAAR,GAAgBF,OAAO,CAAC+B,aAAxC;AACD;;AAED,wBACE/B,OAAO,CAACgC,mBAAR,IACGhC,OAAO,CAACE,KAAR,GAAgBF,OAAO,CAACiC,aAF7B,EAGE;AACAjC,6BAAO,CAACE,KAAR,GAAgBF,OAAO,CAACE,KAAR,GAAgBF,OAAO,CAACiC,aAAxC;AACD;;AAEGC,4B,GAAW,I;;;AAEF,2BAAM,KAAKnB,eAAL,CAAqBoB,WAArB,EAAN;;;AAAXD,4B;;;;;;;;AAGA,2BAAM,KAAKlF,eAAL,CAAqBoF,iBAArB,CAAuC,KAAvC,CAAN;;;;AAGF,2BAAMd,OAAO,CAACH,GAAR,CAAY,CAChB,KAAKN,wBAAL,CAA8BQ,IAA9B,CAAmCrB,OAAnC,CADgB,EAEhB,KAAKc,2BAAL,CAAiCO,IAAjC,CACE,IAAI,8DAAJ,CACErB,OAAO,CAACM,EADV,EAEEoB,KAFF,EAGEQ,QAHF,CADF,CAFgB,CAAZ,CAAN;;;;;;;;;AAUD;;;8BAGClC,O,EAAgB;;;;;;AAEhBA,2BAAO,CAACE,KAAR,GAAgB,CAAhB;;AACA,2BAAMoB,OAAO,CAACH,GAAR,CAAY,CAChB,KAAKN,wBAAL,CAA8BQ,IAA9B,CACErB,OADF,CADgB,EAIhB,KAAKc,2BAAL,CAAiCO,IAAjC,CACE,IAAI,8DAAJ,CACErB,OAAO,CAACM,EADV,EAEE,CAFF,EAGE,EAHF,EAIE,mEAAe+B,KAJjB,CADF,CAJgB,CAAZ,CAAN;;;;;;;;;AAaD;;;kCAGCrC,O,EACAsC,U,EAAkB;;;;;;AAElBtC,2BAAO,CAACC,MAAR,GAAiBqC,UAAjB;;AACA,2BAAM,KAAKzB,wBAAL,CAA8BQ,IAA9B,CACJrB,OADI,CAAN;;;;;;;;;AAGD;;;gCAGCuC,I,EACAC,E,EAAU;;;;;;;;;AAEJC,4B,GAAW,KAAK5B,wBAAL,CAA8B6B,kB,EAC/C;;AACAD,4BAAQ,CAACE,MAAT,CAAgBH,EAAhB,EAAoB,CAApB,EACEC,QAAQ,CAACE,MAAT,CAAgBJ,IAAhB,EAAsB,CAAtB,EAAyB,CAAzB,CADF,E,CAGA;;;AACA,2BAAMjB,OAAO,CAACH,GAAR,CACJsB,QAAQ,CAACjB,GAAT,CACE,UAAOxB,OAAP,EAAgByB,CAAhB;AAAA,6BAAsB;AAAA;AAAA;AAAA;AAAA;AACpBzB,uCAAO,CAACkB,SAAR,GAAoBO,CAApB;AADoB;AAEpB,uCAAM,KAAKZ,wBAAL,CAA8BQ,IAA9B,CAAmCrB,OAAnC,CAAN;;AAFoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAtB;AAAA,qBADF,CADI,CAAN;;;;;;;;;AAQD;AAED;;;;;;4CAIEA,O,EAAgB;;uBAKP4C,U;;;;;AAAAA,8B,iBAAWC,K,EAAOC,G,EAAK;AAC9B,6BAAO,IAAIC,IAAJ,CAASF,KAAK,CAACG,OAAN,KAAkB1D,IAAI,CAAC2D,MAAL,MAAiBH,GAAG,CAACE,OAAJ,KAAgBH,KAAK,CAACG,OAAN,EAAjC,CAA3B,CAAP;AACD,qB;;AALKtB,yB,GAAQpC,IAAI,CAAC4D,KAAL,CAAW5D,IAAI,CAAC2D,MAAL,KAAgB,EAAhB,GAAqB,EAArB,GAA0B,CAArC,C;AACdjD,2BAAO,CAACE,KAAR,IAAiBwB,KAAjB;;AAOA,2BAAMJ,OAAO,CAACH,GAAR,CAAY,CAChB,KAAKN,wBAAL,CAA8BQ,IAA9B,CAAmCrB,OAAnC,CADgB,EAEhB,KAAKc,2BAAL,CAAiCO,IAAjC,CACE,IAAI,8DAAJ,CACErB,OAAO,CAACM,EADV,EAEEoB,KAFF,EAGE,IAHF,EAIE,mEAAeyB,MAJjB,EAKEP,UAAU,CAAC,IAAIG,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAD,EAAuB,IAAIA,IAAJ,EAAvB,CALZ,CADF,CAFgB,CAAZ,CAAN;;;;;;;;;AAYD;;;4BAzJqB;AACpB,iBAAO,KAAKlC,wBAAL,CAA8B6B,kBAArC;AACD;;;;;;AAbe,mBAAAd,0BAAA,GAA6B,CAAC,EAAD,CAA7B;AACA,mBAAAC,0BAAA,GAA6B,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAA7B;;;uBAHLjB,c,EAAc,mJ,EAAA,0J,EAAA,yH,EAAA,0H,EAAA,6H;AAAA,K;;;aAAdA,c;AAAc,eAAdA,cAAc,K;AAAA,kBAFb;;;;;sEAEDA,c,EAAc;cAH1B,wDAG0B;eAHf;AACVwC,oBAAU,EAAE;AADF,S;AAGe,Q","file":"default~counter-analytics-counter-analytics-module~counter-count-counter-count-module~counters-count~b22d7877-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { NgApexchartsModule } from 'ng-apexcharts';\n\nimport { NotImplementedModule } from '../not-implemented/not-implemented.module';\n\nimport { PlusMinusTotalsPieChartComponent } from './plus-minus-totals-pie-chart/plus-minus-totals-pie-chart.component';\nimport { PlusMinusCounterComponent } from './plus-minus-counter/plus-minus-counter.component';\n\nimport { DayOfWeekHistogramComponent } from './day-of-week-histogram/day-of-week-histogram.component';\nimport { DayOfMonthHistogramComponent } from './day-of-month-histogram/day-of-month-histogram.component';\nimport { HourOfDayRadarComponent } from './hour-of-day-radar/hour-of-day-radar.component';\n\nimport { YearHeatmapComponent } from './year-heatmap/year-heatmap.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    IonicModule,\n    NgApexchartsModule,\n    NotImplementedModule,\n  ],\n  declarations: [\n    PlusMinusTotalsPieChartComponent,\n    PlusMinusCounterComponent,\n    DayOfWeekHistogramComponent,\n    DayOfMonthHistogramComponent,\n    HourOfDayRadarComponent,\n    YearHeatmapComponent,\n  ],\n  exports: [\n    PlusMinusCounterComponent,\n  ],\n  entryComponents: [\n    PlusMinusTotalsPieChartComponent,\n    DayOfWeekHistogramComponent,\n    DayOfMonthHistogramComponent,\n    HourOfDayRadarComponent,\n    YearHeatmapComponent,\n  ],\n  providers: [\n  ]\n})\nexport class ComponentsModule { }\n","<ion-item #rootItem\n  [style.--min-height.vh]=\"minHeight\"\n  class=\"ion-no-padding\"\n  (window:resize)=\"recordWidths()\"\n>\n  <ng-template [ngIf]=\"counter.minusCount < 0\">\n    <ion-button\n      #buttonLeft\n\n      class=\"ion-no-padding\"\n\n      size=\"large\"\n      color=\"danger\"\n      expand=\"full\"\n\n      [disabled]=\"counter.locked\"\n      (click)=\"countMinus()\"\n    >\n      <div [ngSwitch]=\"counter.minusCount\">\n        <div *ngSwitchCase=\"-1\">\n          <ion-icon name=\"remove\"></ion-icon>\n        </div>\n\n        <div *ngSwitchDefault>\n          {{counter.minusCount}}\n        </div>\n\n      </div>\n    </ion-button>\n  </ng-template>\n\n\n  <ion-label\n    class=\"ion-text-center\"\n    #textCenter\n\n    clickable\n    (click)=\"showDetails()\"\n  >\n    <h1 *ngIf=\"!hideTitle\">{{counter.title}}</h1>\n    <h1>{{counter.count}}</h1>\n  </ion-label>\n\n    <ng-template [ngIf]=\"showDetailsOnClick\">\n      <ion-icon\n        #clickIndicator\n        name=\"chevron-forward-outline\"\n      ></ion-icon>\n    </ng-template>\n\n  <ng-template [ngIf]=\"counter.plusCount > 0\">\n    <ion-button\n      #buttonRight\n\n      class=\"ion-no-padding\"\n\n      size=\"large\"\n      color=\"success\"\n      expand=\"full\"\n\n      [disabled]=\"counter.locked\"\n      (click)=\"countPlus()\"\n    >\n      <div [ngSwitch]=\"counter.plusCount\">\n        <div *ngSwitchCase=\"1\">\n          <ion-icon name=\"add\"></ion-icon>\n        </div>\n\n        <div *ngSwitchDefault>\n          +{{counter.plusCount}}\n        </div>\n\n      </div>\n    </ion-button>\n  </ng-template>\n\n  <ion-reorder slot=\"end\"></ion-reorder>\n\n</ion-item>\n","import { Component, OnInit, AfterViewInit, Input, ViewChild, ElementRef } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { GestureController } from '@ionic/angular';\n\nimport { Counter } from '../../models/counter';\nimport { CounterService } from '../../services/counter.service';\n\nimport { AppState } from '../../models/app-state';\nimport { AppStateService } from '../../services/app-state.service';\n\n@Component({\n  selector: 'app-plus-minus-counter',\n  templateUrl: './plus-minus-counter.component.html',\n  styleUrls: ['./plus-minus-counter.component.scss'],\n})\nexport class PlusMinusCounterComponent implements OnInit, AfterViewInit {\n\n  readonly SWIPE_CLICK_WIDTH_RATIO = 0.3;\n\n  @ViewChild('rootItem', {read: ElementRef}) rootItem: ElementRef;\n  rootItemWidth: number;\n\n  @ViewChild('textCenter', {read: ElementRef}) textCenter: ElementRef;\n  @ViewChild('clickIndicator', {read: ElementRef}) clickIndicator: ElementRef;\n  @ViewChild('buttonRight', {read: ElementRef}) rightButton: ElementRef;\n  rightButtonWidth: number;\n\n  @ViewChild('buttonLeft', {read: ElementRef}) leftButton: ElementRef;\n  leftButtonWidth: number;\n\n  @Input() counter: Counter;\n  @Input() minHeight: number;\n  @Input() hideTitle = false;\n  @Input() showDetailsOnClick = true;\n\n  swipeClickGesture;\n  swipeClickGestureFirstRun = true;\n  swipeClickLeft = false;\n  swipeClickRight = false;\n\n  constructor(\n    private router: Router,\n    private counterService: CounterService,\n    private appStateService: AppStateService,\n    private gestureCtrl: GestureController,\n  ) {}\n\n  ngOnInit() {}\n\n  ngAfterViewInit() {\n    if(this.appStateService.appState.swipeCounting){\n      this.swipeClickGesture = this.gestureCtrl.create({\n        el: this.rootItem.nativeElement,\n        direction: 'x',\n        threshold: 15,\n        gestureName: 'swipe',\n        onStart: ev => this.onStart(ev),\n        onMove: ev => this.onMoveHandler(ev),\n        onEnd: ev => this.onEnd(ev),\n      });\n      this.swipeClickGesture.enable();\n    }\n  }\n\n  recordWidths(){\n    this.rootItemWidth = this.rootItem.nativeElement.offsetWidth;\n    this.rightButtonWidth = (this.rightButton) ? this.rightButton.nativeElement.offsetWidth : 0;\n    this.leftButtonWidth = (this.leftButton) ? this.leftButton.nativeElement.offsetWidth : 0;\n  }\n\n  onStart(event: any) {\n\n    // record widths of components on first run\n    if(this.swipeClickGestureFirstRun){\n      this.recordWidths();\n      this.swipeClickGestureFirstRun = false;\n    }\n\n    this.swipeClickRight = false;\n    this.swipeClickLeft = false;\n\n    // disable click events\n    if(this.rightButton){\n      this.rightButton.nativeElement.style.pointerEvents = 'none';\n    }\n    if(this.leftButton){\n      this.leftButton.nativeElement.style.pointerEvents = 'none';\n    }\n    this.textCenter.nativeElement.style.pointerEvents = 'none';\n\n    requestAnimationFrame(() => {\n      if (this.rightButton) {\n        this.rightButton.nativeElement.style.removeProperty('transition');\n      }\n      if (this.leftButton) {\n        this.leftButton.nativeElement.style.removeProperty('transition');\n      }\n    });\n  }\n\n  onMoveHandler(event: any) {\n\n    const newRightButtonWidth = Math.min(\n      this.rightButtonWidth - event.deltaX,\n      this.rootItemWidth\n    )\n    if(this.rightButton){\n      this.rightButton.nativeElement.style.width = Math.max(\n        (this.leftButton) ? 0 : this.rightButtonWidth,\n        newRightButtonWidth,\n      ) + 'px';\n    }\n\n    const newLeftButtonWidth = Math.min(\n      this.leftButtonWidth + event.deltaX,\n      this.rootItemWidth\n    );\n    if(this.leftButton){\n      this.leftButton.nativeElement.style.width = Math.max(\n        (this.rightButton) ? 0 : this.leftButtonWidth,\n        newLeftButtonWidth,\n      ) + 'px';\n    }\n\n    if (this.rootItemWidth * this.SWIPE_CLICK_WIDTH_RATIO < newRightButtonWidth) {\n      if(this.rightButton){\n        this.rightButton.nativeElement.style.width = '100%';\n\n        if(this.leftButton){\n          this.leftButton.nativeElement.style.display = 'none';\n        }\n\n        if(this.clickIndicator){\n          this.clickIndicator.nativeElement.style.display = 'none';\n        }\n        this.swipeClickRight = true;\n      }\n    } else if (this.rootItemWidth * this.SWIPE_CLICK_WIDTH_RATIO  < newLeftButtonWidth) {\n      if(this.leftButton){\n        this.leftButton.nativeElement.style.width = '100%';\n\n        if(this.rightButton){\n          this.rightButton.nativeElement.style.display = 'none';\n        }\n\n        if(this.clickIndicator){\n          this.clickIndicator.nativeElement.style.display = 'none';\n        }\n        this.swipeClickLeft = true;\n      }\n    } else {\n      if(this.rightButton){\n        this.rightButton.nativeElement.style.display = 'block';\n      }\n      if(this.leftButton){\n        this.leftButton.nativeElement.style.display = 'block';\n      }\n      if(this.clickIndicator){\n        this.clickIndicator.nativeElement.style.display = 'block';\n      }\n\n      this.swipeClickRight = false;\n      this.swipeClickLeft = false;\n    }\n  }\n\n  onEnd(event: any) {\n\n    // enable click events again\n    if(this.rightButton){\n      this.rightButton.nativeElement.style.pointerEvents = 'auto';\n    }\n    if(this.leftButton){\n      this.leftButton.nativeElement.style.pointerEvents = 'auto';\n    }\n    this.textCenter.nativeElement.style.pointerEvents = 'auto';\n\n    requestAnimationFrame(() => {\n      if(this.rightButton){\n        this.rightButton.nativeElement.style.setProperty('transition', '0.2s all ease');\n        this.rightButton.nativeElement.style.display = 'block';\n        this.rightButton.nativeElement.style.width = this.rightButtonWidth + 'px';\n      }\n      if(this.leftButton){\n        this.leftButton.nativeElement.style.setProperty('transition', '0.2s all ease');\n        this.leftButton.nativeElement.style.display = 'block';\n        this.leftButton.nativeElement.style.width = this.leftButtonWidth + 'px';\n      }\n\n      if(this.clickIndicator){\n        this.clickIndicator.nativeElement.style.display = 'block';\n      }\n    });\n\n\n    if(this.swipeClickRight){\n      if(this.rightButton){\n        this.rightButton.nativeElement.click()\n      }\n    }\n\n    if(this.swipeClickLeft){\n      if(this.leftButton){\n        this.leftButton.nativeElement.click()\n      }\n    }\n  }\n\n  async countPlus() {\n    if (!this.counter.locked){\n      await this.counterService.count(\n        this.counter,\n        this.counter.plusCount,\n      );\n    }\n  }\n\n  async countMinus() {\n    if (!this.counter.locked){\n      await this.counterService.count(\n        this.counter,\n        this.counter.minusCount,\n      );\n    }\n  }\n\n  showDetails() {\n    if(this.showDetailsOnClick){\n      this.router.navigate(['/counter-detail', this.counter.id]);\n    }\n  }\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { Vibration } from '@ionic-native/vibration/ngx';\n\nimport { Counter } from '../models/counter';\nimport { CounterRepositoryService } from '../models/counter-repository.service';\n\nimport { CountEvent, CountEventType } from '../models/count-event';\nimport { CountEventRepositoryService } from '../models/count-event-repository.service';\n\nimport { Position } from '../models/count-event';\nimport { PositionService } from './position.service';\n\nimport { AppStateService } from './app-state.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CounterService {\n\n  static readonly VIBRATION_PATTERN_POSITIVE = [30];\n  static readonly VIBRATION_PATTERN_NEGATIVE = [30, 30, 30];\n\n  constructor(\n    private counterRepositoryService: CounterRepositoryService,\n    private countEventRepositoryService: CountEventRepositoryService,\n    private positionService: PositionService,\n    private appStateService: AppStateService,\n    private vibration: Vibration,\n  ) {}\n\n  get allSortBySortOrder(): Array<Counter> {\n    return this.counterRepositoryService.allSortBySortOrder;\n  }\n\n  async addCounter() {\n    const newCounter = new Counter();\n    // add counter to bottom\n    newCounter.sortOrder = this.counterRepositoryService.all.length + 1;\n    await this.counterRepositoryService.save(newCounter);\n    return newCounter;\n  }\n\n  async delete(counter: Counter) {\n    // first delete the counter: this is so that the ui element disappers\n    // quicker which should be create better user experience.\n    await this.counterRepositoryService.delete(counter);\n\n    // then, delete all events of this counter\n    await Promise.all(\n      this.countEventRepositoryService.getByCounter(counter).map(\n        (i) => this.countEventRepositoryService.delete(i)\n      )\n    );\n  }\n\n  async count(\n    counter: Counter,\n    delta: number,\n  ) {\n    counter.count += delta;\n\n    // vibrate\n    if (\n      this.appStateService.appState.vibrate\n      && counter.vibrate\n    ) {\n      this.vibration.vibrate(\n        (delta > 0) ?\n          CounterService.VIBRATION_PATTERN_POSITIVE :\n          CounterService.VIBRATION_PATTERN_NEGATIVE\n      );\n    }\n\n    // apply positive and negative wraparounds\n    if (\n      counter.positiveLimitActive\n      && counter.count > counter.positiveLimit\n    ) {\n      counter.count = counter.count % counter.positiveLimit;\n    }\n\n    if (\n      counter.negativeLimitActive\n      && counter.count < counter.negativeLimit\n    ) {\n      counter.count = counter.count % counter.negativeLimit;\n    }\n\n    let position = null;\n    try {\n      position = await this.positionService.getPosition();\n    } catch (e) {\n      // user does not allow posiiton recording or something unexpected happened\n      await this.appStateService.setRecordPosition(false);\n    }\n\n    await Promise.all([\n      this.counterRepositoryService.save(counter),\n      this.countEventRepositoryService.save(\n        new CountEvent(\n          counter.id,\n          delta,\n          position,\n        )\n      )\n    ]);\n  }\n\n  async reset(\n    counter: Counter,\n  ) {\n    counter.count = 0;\n    await Promise.all([\n      this.counterRepositoryService.save(\n        counter\n      ),\n      this.countEventRepositoryService.save(\n        new CountEvent(\n          counter.id,\n          0,\n          {} as any,\n          CountEventType.Reset,\n        )\n      ),\n    ]);\n  }\n\n  async setLocked(\n    counter: Counter,\n    setLocked: boolean,\n  ) {\n    counter.locked = setLocked;\n    await this.counterRepositoryService.save(\n      counter\n    );\n  }\n\n  async reorder(\n    from: number,\n    to: number,\n  ) {\n    const counters = this.counterRepositoryService.allSortBySortOrder;\n    // move element in array\n    counters.splice(to, 0,\n      counters.splice(from, 1)[0]\n    );\n    // save in new order\n    await Promise.all(\n      counters.map(\n        async (counter, i) => {\n          counter.sortOrder = i;\n          await this.counterRepositoryService.save(counter);\n        }\n      )\n    );\n  }\n\n  /**\n   * For development purposes only\n   */\n  async addRandomCountEvent(\n    counter: Counter,\n  ) {\n    const delta = Math.round(Math.random() * 10 % 10 - 5);\n    counter.count += delta;\n\n    function randomDate(start, end) {\n      return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));\n    }\n\n\n    await Promise.all([\n      this.counterRepositoryService.save(counter),\n      this.countEventRepositoryService.save(\n        new CountEvent(\n          counter.id,\n          delta,\n          null,\n          CountEventType.Change,\n          randomDate(new Date(2012, 0, 1), new Date()),\n        )\n      )\n    ]);\n  }\n\n}\n"]}